# Example: Custom pipeline configuration for a consuming repository.
# Place this file as "swarm.config.yaml" in the repository root.
# Only override what you need — everything else falls back to defaults.
#
# This example shows:
#   - A custom engineer agent (local .md file)
#   - An additional security reviewer in the pipeline
#   - Increased QA iterations
#   - No design phase (backend-only project)

primaryModel: claude-opus-4-6
reviewModel: gpt-5.3-codex

agents:
  pm:              builtin:pm
  pm-reviewer:     builtin:pm-reviewer
  spec-reviewer:   builtin:eng-spec-reviewer
  engineer:        .github/agents/engineer.md        # Custom engineer instructions
  code-reviewer:   builtin:eng-code-reviewer
  tester:          builtin:tester
  security:        .github/agents/security-reviewer.md  # Entirely new agent
  cross-model:     builtin:cross-model-reviewer

pipeline:
  # Phase 1: Specification with reviews
  - phase: spec
    agent: pm
    reviews:
      - agent: pm-reviewer
        maxIterations: 3
        approvalKeyword: APPROVED
      - agent: spec-reviewer
        maxIterations: 2
        approvalKeyword: APPROVED

  # Phase 2: Task decomposition
  - phase: decompose
    agent: pm
    frontendMarker: "[FRONTEND]"

  # No design phase — this is a backend-only project

  # Phase 3: Implementation with extra security review
  - phase: implement
    parallel: true
    agent: engineer
    reviews:
      - agent: code-reviewer
        maxIterations: 3
        approvalKeyword: APPROVED
      - agent: security
        maxIterations: 2
        approvalKeyword: APPROVED
    qa:
      agent: tester
      maxIterations: 8
      approvalKeyword: ALL_PASSED

  # Phase 4: Cross-model review
  - phase: cross-model-review
    condition: differentReviewModel
    agent: cross-model
    fixAgent: engineer
    maxIterations: 3
    approvalKeyword: APPROVED
